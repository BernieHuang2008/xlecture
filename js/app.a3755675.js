(function(){"use strict";var e={9385:function(e,n,t){var o=t(5130),c=t(6768),l=t(144),u=t(4232);t(8111),t(1701);const r="http://localhost:5002";var i=t(8202);const a={class:"toc-tree"},s={class:"toc-tree__title"},d=["onClick"],v={class:"toc-tree__section-content"},f=["onClick"],p=["onClick"];var m={__name:"TocTree",props:{lecid:String,modelValue:Object},emits:["update:modelValue"],setup(e,{emit:n}){const t=e,m=n,h=(0,l.KR)("Lecture Title"),k=(0,l.KR)([]),g=(0,l.KR)([]);function b(e){g.value[e].open=!g.value[e].open}function y(e,n){g.value[e].sequences[n].open=!g.value[e].sequences[n].open}function _(e){console.log("Path changed to:",e),k.value=e,m("update:modelValue",e[2])}return(0,c.sV)((()=>{fetch(r+`/${t.lecid}/get_course_info`).then((e=>e.json())).then((e=>{g.value=e["table_of_contents"].map((e=>({...e,open:!1,sequences:e.sequences.map((e=>({...e,open:!1})))})))})).catch((e=>{console.error("Error fetching TOC:",e)}))})),(e,n)=>((0,c.uX)(),(0,c.CE)("div",a,[(0,c.Lk)("h2",s,(0,u.v_)(h.value),1),((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(g.value,((e,n)=>((0,c.uX)(),(0,c.CE)("div",{class:"toc-tree__section",key:n},[(0,c.Lk)("span",{class:(0,u.C4)("section-title "+(-1!=k.value.indexOf(e)?"here":"")),onClick:e=>b(n)},(0,u.v_)(e.title),11,d),(0,c.bo)((0,c.Lk)("div",v,[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(e.sequences,((t,r)=>((0,c.uX)(),(0,c.CE)("div",{class:"toc-tree__sequence",key:r},[(0,c.Lk)("span",{class:(0,u.C4)("seq-title "+(-1!=k.value.indexOf(t)?"here":"")),onClick:e=>y(n,r)},(0,u.v_)(t.title),11,f),(0,c.bo)((0,c.Lk)("ul",null,[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(t.items,((n,o)=>((0,c.uX)(),(0,c.CE)("li",{class:"toc-tree__sequence-item",key:o},["video"==n.type?((0,c.uX)(),(0,c.Wv)((0,l.R1)(i.Ubr),{key:0,class:"icon"})):(0,c.Q3)("",!0),"problem"==n.type?((0,c.uX)(),(0,c.Wv)((0,l.R1)(i.SFT),{key:1,class:"icon"})):(0,c.Q3)("",!0),(0,c.Lk)("a",{class:(0,u.C4)(-1!=k.value.indexOf(n)?"here":""),onClick:o=>_([e,t,n])},(0,u.v_)(n.title),11,p)])))),128))],512),[[o.aG,t.open]])])))),128))],512),[[o.aG,e.open]])])))),128))]))}},h=t(1241);const k=(0,h.A)(m,[["__scopeId","data-v-045b2324"]]);var g=k;const b={class:"video-container"},y=["src"],_={name:"VideoDisplay"};var x=Object.assign(_,{props:{lecid:String,vidInfo:Object},setup(e){const n=e,t=(0,l.Kh)({position:"fixed",top:"100px",left:"100px",cursor:"move"});let i=!1,a={x:0,y:0};const s=(0,l.KR)(null),d=(0,l.Kh)({en:[],zh:[]}),v=(0,l.KR)([]);function f(e){i=!0,a.x=e.clientX-t.left.replace("px",""),a.y=e.clientY-t.top.replace("px",""),document.addEventListener("mousemove",p),document.addEventListener("mouseup",m)}function p(e){i&&(t.left=e.clientX-a.x+"px",t.top=e.clientY-a.y+"px")}function m(){i=!1,document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",m)}function h(){const e=1e3*s.value.currentTime;var n=["en","zh"],t=[];let o="en",c=d[o];for(var l=0;l<c.text.length;l++){let o=c.start[l],u=c.end[l];c.text[l];if(e>=o&&e<=u){for(let e=0;e<n.length;e++)t[e]={text:d[n[e]].text[l],lang:n[e]};break}if(o>e)break}v.value=t}async function k(){try{const e=await fetch(`${r}/${n.lecid}/get_cc/${n.vidInfo.cc.en}`),t=await fetch(`${r}/${n.lecid}/get_cc/${n.vidInfo.cc.zh}`);d.en=await e.json(),d.zh=await t.json()}catch(e){console.error("Error fetching CC data:",e)}}function g(){console.log("Video started playing")}function _(){console.log("Video paused")}function x(){console.log("Video ended")}return document.addEventListener("fullscreenchange",(e=>{const n=document.getElementById("fake-fullscreen-detector");if(document.fullscreenElement&&e.target===n)return!1;document.fullscreenElement&&(document.fullscreenElement.classList.toggle("fake-fullscreen"),document.body.classList.toggle("fake-fullscreen"),document.exitFullscreen(),console.log(n,document.fullscreenElement),n.requestFullscreen())})),(0,c.sV)((()=>{k()})),(n,i)=>((0,c.uX)(),(0,c.CE)("div",b,[(0,c.Lk)("video",{ref_key:"videoPlayer",ref:s,class:"video-player",controls:"",src:(0,l.R1)(r)+"/"+e.lecid+"/get_video/"+e.vidInfo.video,onPlay:g,onPause:_,onEnded:x,onTimeupdate:h},null,40,y),(0,c.bo)((0,c.Lk)("div",{class:"cc-container",ref:"ccContainer",onMousedown:f,style:(0,u.Tr)(t)},[(0,c.Lk)("div",null,[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(v.value,((e,n)=>((0,c.uX)(),(0,c.CE)("p",{class:(0,u.C4)("cc cc-"+e.lang),key:n},(0,u.v_)(e.text),3)))),128))])],36),[[o.aG,v.value.length>0]]),i[0]||(i[0]=(0,c.Lk)("div",{id:"fake-fullscreen-detector"},null,-1))]))}});const C=(0,h.A)(x,[["__scopeId","data-v-641e5b54"]]);var E=C,L=t(4496);const O={class:"tbar"},X={class:"lbar"},j={class:"mainbar"},w={name:"App",components:{TocTree:g}};var K=Object.assign(w,{setup(e){const n=(0,l.KR)(null),t=(0,l.KR)(!1);return(0,c.wB)(n,((e,n)=>{e&&(t.value=!1)}),{deep:!0}),(e,r)=>((0,c.uX)(),(0,c.CE)(c.FK,null,[(0,c.Lk)("div",O,[(0,c.bF)((0,l.R1)(L.Znj),{onClick:r[0]||(r[0]=e=>t.value=!t.value)}),r[2]||(r[2]=(0,c.Lk)("h1",null,(0,u.v_)("mit700x"),-1))]),(0,c.bo)((0,c.Lk)("div",X,[(0,c.bF)(g,{lecid:"mit700x",modelValue:n.value,"onUpdate:modelValue":r[1]||(r[1]=e=>n.value=e)},null,8,["modelValue"])],512),[[o.aG,t.value]]),(0,c.Lk)("div",j,[n.value&&"video"==n.value.type?((0,c.uX)(),(0,c.Wv)(E,{key:0,lecid:"mit700x",vidInfo:n.value.content},null,8,["vidInfo"])):(0,c.Q3)("",!0)])],64))}});const I=K;var T=I;(0,o.Ef)(T).mount("#app")}},n={};function t(o){var c=n[o];if(void 0!==c)return c.exports;var l=n[o]={exports:{}};return e[o].call(l.exports,l,l.exports,t),l.exports}t.m=e,function(){var e=[];t.O=function(n,o,c,l){if(!o){var u=1/0;for(s=0;s<e.length;s++){o=e[s][0],c=e[s][1],l=e[s][2];for(var r=!0,i=0;i<o.length;i++)(!1&l||u>=l)&&Object.keys(t.O).every((function(e){return t.O[e](o[i])}))?o.splice(i--,1):(r=!1,l<u&&(u=l));if(r){e.splice(s--,1);var a=c();void 0!==a&&(n=a)}}return n}l=l||0;for(var s=e.length;s>0&&e[s-1][2]>l;s--)e[s]=e[s-1];e[s]=[o,c,l]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={524:0};t.O.j=function(n){return 0===e[n]};var n=function(n,o){var c,l,u=o[0],r=o[1],i=o[2],a=0;if(u.some((function(n){return 0!==e[n]}))){for(c in r)t.o(r,c)&&(t.m[c]=r[c]);if(i)var s=i(t)}for(n&&n(o);a<u.length;a++)l=u[a],t.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return t.O(s)},o=self["webpackChunkxlecture"]=self["webpackChunkxlecture"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}();var o=t.O(void 0,[504],(function(){return t(9385)}));o=t.O(o)})();
//# sourceMappingURL=app.a3755675.js.map